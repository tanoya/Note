# `redis` 实现分布式锁	
分布式锁的实现逻辑大致相同，将集群每个节点都可访问的某个资源作为资源访问锁，在`redis`实现中就是将 redis作为锁，通过检查约定的`key`是不是已经被创建来检查被保护的资源是不是被某个节点访问了。比如我们将资源`A`作为访问资源，且在多集群部署中存在资源竞争的问题。`Machine01`访问 `A`的时候，在redis创建`lock` key. 此时`Machine02`也想去访问资源`A`, 也会先去创建key，此时如果发现key已经存在了，说明资源正在被其他资源访问，资源净增失败。`Machine01`访问结束，此时会删除`lock` key,表示资源已经访问完了。此时集群其他的机器就可以访问竞争资源了。

#### 常用的几个`redis`命令
- `SETNX`
> ``` setnx key value ``` 当key不存在的时候，创建成功，返回1， 否则返回0

- `EXPIRE`
> ``` expire key timeout``` 给key设置过期时间，超过时间则自动将锁清理掉，防止没有自动解锁的时候出现死锁现象

- `DELETE`
> ``` delete key ``` 删除key，表示解锁