# 主节点的选举策略
`redis`的主从服务器的分布策略，必然会引发当主服务器挂掉之后，如何选举主节点的问题。
主要的功能
- 监控
- 提醒
- 自动故障转移

#### “哨兵”`sentinel`角色的存在
集群当中存在哨兵的角色，可以理解为哨兵是和普通的redis节点并行运行的，但是职责不同。可以在redis启动的时候，通过配置确定当前节点是否开启哨兵。

- 哨兵的职责
1. 判断主节点的可用性
2. 选举新的主节点
3. 判断Master节点为不可用之后，进行数据转移

#### 实现原理
哨兵可以和master节点/slave节点/其他哨兵节点通讯，如果发现请求无响应，则主管认为该master无效。然后和其他哨兵询问该master节点是否有效，多数为无效则认为该master节点为`客观无效`状态。
如果master节点被认为是`客观无效`，此时`sentinel`会选举领头`sentinel`,策略是，优先选举自己。
产生领头`sentinel`之后，则领头	`sentinel`开始故障转移

- 故障转移
故障转移其实分为多个步骤
	- 选举领头`sentinel`
	- 领头找到合适的slave节点作为master节点
	- 数据的迁移

*备注*
[原文链接](https://www.cnblogs.com/huangfuyuan/p/9880379.html)